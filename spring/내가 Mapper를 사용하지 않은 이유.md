## 사용하게 된 계기
* Dto와 Entity 변환을 위해서 매번 코드를 작성하는 것은 비효율적이라고 생각했다.  
* MapStruct 라이브러리를 사용하면 이 부분이 많이 해소될 수 있다는 정보를 알게 되었다.
* MapStruct는 간단하게 설명하자면, Java bean 유형 간의 매핑 구현을 단순화하는 코드 생성기이다.  

참고링크 : [편리한 객체 간 매핑을 위한 MapStruct 적용기 (feat. SENS)](https://medium.com/naver-cloud-platform/기술-컨텐츠-문자-알림-발송-서비스-sens의-mapstruct-적용기-8fd2bc2bc33b)

## 내가 Mapper를 사용하지 않은 이유 (Deprecated)

1. 컨트롤러에 인수가 너무 많아서 좀 지저분해 보인다…ㅋㅋ 뿐만 아니라 저거 인수 하나하나 넣는 것도 크진 않지만 리소스라고 생각한다…
<img width="936" alt="스크린샷 2024-02-29 오후 9 34 55" src="https://github.com/mikekks/traces-of-thought/assets/100754581/7a13a4d2-bddd-4803-b04f-ef0a91cfb38b">  
<br><br/>
  
2. 매퍼에 그냥 Dto 하나만 넣어도 되는데 그럴 경우 아래 문제가 발생한다.
    1. enum 변환 과정에서 `IllegalArgumentException` 이 발생함. 하지만 해당 에러는 개발자가 통제할 수 없는 에러가 아니다. 최대한 예외는 개발자가 만든 `CustomException` 으로 잡아내는 것이 가장 이상적이다.
    2. Dto 내의 변수 이름과 엔티티의 변수 이름이 똑같아야 구현 인터페이스(`MapperImpl`)에서 같은 것임을 인식할 수 있다. 그 말은 즉슨 Dto의 유연성이 많이 떨어짐을 반증한다.

## 새롭게 알게 된 사실
* MapStruct는 유연성이 많이 떨어지는 아쉬운 코드 생성기라고 생각했다.
* 하지만 더 자세히 보니 역시나 이런 문제들을 해결하기 위해 여러 커스텀 방법들을 제공하고 있었다...
* `사용하게된 계기`에 첨부한 링크에서도 볼 수 있었다...
* **처음 사용할 당시에는 공감이 잘 되지 않아 대충보고 넘겼는데 지금 시점에 보니 당장 나에게 필요한 내용이었다...**

## 기존 문제 해결 방법
* `String` 값으로 적절한 `Enum`으로 매칭할 때 우리가 정의한 예외타입을 사용할 수 없다는 것이 가장 큰 문제였다.
* 하지만 `특정 필드 매핑 시 지정 메소드 이용` 이 가능하다는 것을 알게 되었고, 해당 부분이 문제 해결의 핵심인 것 같다.
<img width="749" alt="스크린샷 2024-02-29 오후 10 19 47" src="https://github.com/mikekks/traces-of-thought/assets/100754581/23239793-6ebd-4eb7-8858-1280ece8dbed">

* 위 코드처럼 `@Mapping` 어노테이션을 사용하여 `source`, `target`, `qualifiedByName`를 설정한다.
* `source` : 파라미터로 들어오는 변수(변환하려는 변수), `target` : 변환된 변수, `qualifiedByName` : {사용할 메서드 이름}
* 그리고 사용할 메서드를 작성하고 어노테이션으로 `@Named("{사용할 메서드 이름}")` 를 사용하여 매핑시킨다. (내가 정의한 메서드는 `scopeToEnum` 이다.)

## 잘 동작하는지 확인
* 이렇게 이론만 봐도 좋지만 그럼 실제로 어떻게 동작하는지 눈으로 확인하고 싶다.
<img width="843" alt="스크린샷 2024-02-29 오후 10 29 32" src="https://github.com/mikekks/traces-of-thought/assets/100754581/e4dd8e05-ee43-4e9e-81bf-e8b90494e3fd">

* 하이라이트한 부분을 보면, scope 변수를 초기화할 때 내가 정의한 메서드 `scopeToEnum`가 사용되는 것을 확인할 수 있다!
* 이외에도 언급을 안했지만, MapStruct의 장점은 꽤나 많다. 간단히 말해보자면,
  
  1. 컴파일 시점에 코드를 생성하여 런타임에서 안정성을 보장한다. 런타임 시점과 컴파일 시점은 매우 다른 시점이라고 생각한다. 컴파일 시점에 확인할 수 있다는 장점은 매우 큰 장점이라고 생각한다.
  2. 객체 매핑을 반복하다 보면 휴먼에러가 발생할 가능성이 있다. 하지만 `MapStruct`로 자동화할 수 있기 때문에 매우 큰 장점이라고 생각한다.
  3. 필드 변수가 많은 엔티티의 경우 일일이 코드로 작성하는 것은 매우매우매우 귀찮은 일이다..! 따라서 자동으로 코드를 생성해준다는 것은 정말 큰 가치이다! (물론 자동으로 생성되기 때문에 사용법에 대해 잘 알아야 하긴 하다)
 
* 이런 여러 장점과 커스텀 가능함을 고려해봤을 때, `MapStruct`는 개발자들에게 아주 좋은 선택지가 되는 것 같다. 나도 애용해야겠다는 생각을 했다!
